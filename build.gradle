plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '0.4.16'
}

group 'com.intellij'
version '2.12.0.212'

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

repositories {
    mavenCentral()
}


dependencies {
    compile group: 'commons-io', name: 'commons-io', version: '2.6'
    compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.7'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.10.2'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.10.2'
    compile group: 'com.fasterxml.jackson.dataformat', name: 'jackson-dataformat-yaml', version: '2.10.2'
    // https://mvnrepository.com/artifact/org.projectlombok/lombok

    compileOnly 'org.projectlombok:lombok:1.18.20'
   	annotationProcessor 'org.projectlombok:lombok:1.18.20'

    testCompileOnly 'org.projectlombok:lombok:1.18.20'
    testAnnotationProcessor 'org.projectlombok:lombok:1.18.20'

    testCompile group: 'junit', name: 'junit', version: '4.13.1'
}


tasks.withType(JavaCompile) {
    options.encoding = "UTF-8"
}



sourceSets {
    main {
        java.srcDirs 'src','gen'
        resources.srcDir 'resources'
    }

    test {
        java.srcDir 'test/src'
        resources.srcDir 'test/resources'
    }

}

intellij {
    // full list of IntelliJ IDEA releases at https://www.jetbrains.com/intellij-repository/releases
    // full list of IntelliJ IDEA EAP releases at https://www.jetbrains.com/intellij-repository/snapshots
    version 'IU-212.4037-EAP-CANDIDATE-SNAPSHOT'
    //version '2021.1.1'
    //version 'IU-211.7142.45'
    sandboxDirectory project.rootDir.canonicalPath + "/.sandbox"
    plugins 'java',
            //'PythonCore:201.6073.9',
            'Pythonid:212.4037.9',
            'Kotlin',
            'org.intellij.scala:2021.2.9',
            'JavaScriptLanguage',
            'CSS',
            'Dart:212.4037.9',
            'Groovy',
            'properties',
            'org.jetbrains.plugins.ruby:212.4037.9',
            'com.jetbrains.php:212.4037.57',
            'java-i18n',
            'DatabaseTools',
//            'org.rust.lang:0.4.148.3911-212',
//            'org.toml.lang:0.2.148.3911-212',
            'org.jetbrains.plugins.go:212.4037.9'
    updateSinceUntilBuild true

//    plugins = ["PythonCore:2018.2.182.3684.101"]
}

publishPlugin {
    token System.getenv("ORG_GRADLE_PROJECT_intellijPublishToken")
}
